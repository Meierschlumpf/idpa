// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  // NOTE: When using postgresql, mysql or sqlserver, uncomment the @db.Text annotations in model Account below
  // Further reading:
  // https://next-auth.js.org/adapters/prisma#create-the-prisma-schema
  // https://www.prisma.io/docs/reference/api-reference/prisma-schema-reference#string
  url      = env("DATABASE_URL")
}

model Subject {
  id                String @id @default(cuid())
  name              String
  routeName         String
  icon              String
  plans             Plan[]
}

model Plan {
  id                String @id @default(cuid())
  day               Int
  subjectId         String
  semesterId         String
  subject           Subject @relation(fields: [subjectId], references: [id])
  semester           Semster @relation(fields: [semesterId], references: [id])
  items             PlanItem[]

}

model Semster {
  id                String @id
  start             DateTime
  end               DateTime
  plans             Plan[]
}

model PlanItem {
  id                String @id @default(cuid())
  date              DateTime
  title             String?
  description       String?
  planId            String
  badges            PlanItemBadge[]
  plan              Plan @relation(fields: [planId], references: [id])
}

model PlanItemBadge {
  itemId            String
  badgeId           String
  evaluated         Boolean
  item              PlanItem @relation(fields: [itemId], references: [id])
  badge             PlanBadge @relation(fields: [badgeId], references: [id])

  @@id([itemId, badgeId])
}

model PlanBadge {
  id                String @id @default(cuid())
  name              String
  items            PlanItemBadge[]
}